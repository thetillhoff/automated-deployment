- name: get gnome theme
  shell: gsettings get org.gnome.desktop.interface gtk-theme
  register: r_gnome_theme
  changed_when: no
- set_fact:
    gnome_theme: "{{ r_gnome_theme.stdout }}"
- name: set gnome theme
  shell: gsettings set org.gnome.desktop.interface gtk-theme "Adwaita-dark"
  when: gnome_theme != "'Adwaita-dark'"

- name: get gnome animation setting
  shell: gsettings get org.gnome.desktop.interface enable-animations
  register: r_gnome_animation
  changed_when: no
- set_fact:
    gnome_animation: "{{ r_gnome_animation.stdout }}"
- name: set gnome animation setting
  shell: gsettings set org.gnome.desktop.interface enable-animations false
  when: gnome_animation == true

- name: check favorites of gnome bar
  shell: dconf read /org/gnome/shell/favorite-apps
  register: r_gnome_favorites
  changed_when: no
- set_fact:
    gnome_favorites: "{{ r_gnome_favorites.stdout | string }}"
- set_fact:
    gnome_wanted_favorites: "['org.gnome.Terminal.desktop', 'org.gnome.Nautilus.desktop', 'code.desktop', 'firefox.desktop', 'git-cola.desktop']"
- name: set favorites of gnome bar
  shell: dconf write /org/gnome/shell/favorite-apps "{{ gnome_wanted_favorites }}"
  when: gnome_favorites != gnome_wanted_favorites